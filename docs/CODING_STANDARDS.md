# CODING_STANDARDS

## Общие правила

- Форматирование: Prettier (см. `.prettierrc`). Максимальная длина строки - 100.
- Линтинг: ESLint в `apps/web` и `apps/api`.
- Один стиль импорта: сначала внешние, затем внутренние, затем относительные.
- Избегать `any`, кроме случаев, где тип действительно неизвестен.

## Нейминг

- Файлы:
  - React компоненты: `PascalCase.tsx`.
  - Хуки: `useSomething.ts`.
  - Утилиты/сервисы: `kebab-case.ts` или `camelCase.ts` (единообразно в папке).
  - Next.js special files: `page.tsx`, `layout.tsx`, `loading.tsx`, `error.tsx`.
- Компоненты/классы: `PascalCase`.
- Функции/переменные: `camelCase`.
- Константы: `UPPER_SNAKE_CASE`.
- DTO: `SomethingRequestDto`, `SomethingResponseDto`.

## NestJS принципы

- Controller только принимает/валидирует входные данные и вызывает Service.
- Service содержит бизнес-логику и не зависит от HTTP слоя.
- DTO всегда валидируются через `class-validator`.
- Entities/DTO/Response разделены по назначению.

## Next.js принципы

- Страницы - в App Router (`app/*`).
- UI-компоненты без прямого доступа к API, запросы - через слой API/сервисы.
- Клиентские компоненты минимизируются, по возможности использовать серверные.

## Проверки и команды

- Форматирование: `bun run format`
- Проверка форматирования: `bun run format:check`
- Линтинг: `bun run lint` (или `lint:web`, `lint:api`)
- Typecheck: `bun run typecheck` (или `typecheck:web`, `typecheck:api`, `typecheck:shared`)
- Pre-commit (если включен Husky): `bun run lint-staged`

## Code review чеклист (10-15 пунктов)

1. Код проходит `lint` и `format:check`.
2. Нет неиспользуемых переменных и импортов.
3. Нет лишних `any` - типы выведены корректно.
4. DTO корректно описаны и валидируются.
5. Controller не содержит бизнес-логики.
6. Service не зависит от HTTP контекста.
7. Публичные методы и параметры имеют понятные имена.
8. Ошибки обрабатываются явно, нет скрытых `catch` без логирования.
9. Нет синхронного IO в горячих путях.
10. Нет дублирования логики (вынесено в утилиты).
11. В Next: данные получаются через API слой.
12. В Next: клиентские компоненты используются только при необходимости.
13. Нет мертвого кода и закомментированных блоков.
14. Обновлена документация, если затронут контракт или правила.
